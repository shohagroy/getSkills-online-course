if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("useMWFilePDFDataQuery.graphql",["useMWFilePDFDataQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"attachment_id"},{defaultValue:null,kind:"LocalArgument",name:"message_id"},{defaultValue:null,kind:"LocalArgument",name:"thread_id"}],c={kind:"Variable",name:"message_id",variableName:"message_id"},d=[{kind:"Variable",name:"attachment_id",variableName:"attachment_id"},c],e={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"preview_pdf_url",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"downloadable_uri",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"filesize",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"mimetype",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},k=[{kind:"Variable",name:"id",variableName:"thread_id"}];c=[{kind:"Literal",name:"first",value:1},c,{kind:"Literal",name:"message_shared_media_type",value:"FILE"}];var l={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"fbsbx_url",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},p={kind:"InlineFragment",selections:[o],type:"Node",abstractKey:"__isNode"};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useMWFilePDFDataQuery",selections:[{kind:"RequiredField",field:{alias:"file",args:d,concreteType:null,kind:"LinkedField",name:"message_attachment",plural:!1,selections:[{kind:"InlineFragment",selections:[e,f,{kind:"RequiredField",field:g,action:"THROW",path:"file.downloadable_uri"},h,i,{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[j],storageKey:null}],type:"MessageFile",abstractKey:null}],storageKey:null},action:"THROW",path:"file"},{kind:"RequiredField",field:{alias:"thread",args:k,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[{kind:"RequiredField",field:{alias:"messages",args:c,concreteType:"MessagesWithAttachmentsOfThreadConnection",kind:"LinkedField",name:"messages_with_attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagesWithAttachmentsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:l,action:"THROW",path:"thread.messages.edges.node.timestamp_precise"}],storageKey:null},action:"THROW",path:"thread.messages.edges.node"}],storageKey:null}],storageKey:null},action:"THROW",path:"thread.messages"}],storageKey:null},action:"THROW",path:"thread"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"MessengerSDKSbxConfig",kind:"LinkedField",name:"messender_sdk_sbx_config",plural:!1,selections:[{kind:"RequiredField",field:m,action:"THROW",path:"messender_sdk_sbx_config.fbsbx_url"}],storageKey:null},action:"THROW",path:"messender_sdk_sbx_config"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useMWFilePDFDataQuery",selections:[{alias:"file",args:d,concreteType:null,kind:"LinkedField",name:"message_attachment",plural:!1,selections:[n,{kind:"InlineFragment",selections:[e,f,g,h,i,{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[j,o],storageKey:null}],type:"MessageFile",abstractKey:null},p],storageKey:null},{alias:"thread",args:k,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[{alias:"messages",args:c,concreteType:"MessagesWithAttachmentsOfThreadConnection",kind:"LinkedField",name:"messages_with_attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagesWithAttachmentsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[n,l,p],storageKey:null}],storageKey:null}],storageKey:null},o],storageKey:null},{alias:null,args:null,concreteType:"MessengerSDKSbxConfig",kind:"LinkedField",name:"messender_sdk_sbx_config",plural:!1,selections:[m],storageKey:null}]},params:{id:b("useMWFilePDFDataQuery_facebookRelayOperation"),metadata:{},name:"useMWFilePDFDataQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWFilePDFViewerTextLayerElement.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.selectionKey;a=a.textLayer;return h.jsx("span",{className:"x1sdyfia x1hx0egp x1hj3fc7 x10l6tqk x1ed109x x19co3pv","data-ofe-selection":b,style:a.style,children:a.textContent})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWFileViewerLoadingIndicator.react",["CometProgressIndicator.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx("div",{className:"xh8yej3 xl56j7k x5yr21d x78zum5 x6s0dn4",children:h.jsx(c("CometProgressIndicator.react"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useResizeObserverWithTargetRect",["react","useDebouncedComet","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useState;function a(a){var b=a.onScaleChange,d=a.targetRect;a=a.verticalZoomModifier;var e=a===void 0?1:a;a=i(null);var f=a[0];a=a[1];h(function(){if(f==null||d==null)return;var a=d.height>d.width?e:1;a=Math.min(f.width/d.width,f.height/(d.height*a),1);b(a)},[b,f,d,e]);return c("useResizeObserver")(c("useDebouncedComet")(a))}g["default"]=a}),98);
__d("MWFilePDFViewerPageView.react",["CometColumn.react","CometColumnItem.react","CometImage.react","CometProgressIndicator.react","CometScrollableArea.react","MWFilePDFViewerTextLayerElement.react","MWFileViewerLoadingIndicator.react","react","stylex","useResizeObserverWithTargetRect","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useRef,k=b.useState,l={container:{height:"x5yr21d",width:"xh8yej3"},imageArea:{position:"x1n2onr6"},layerContainer:{position:"x1n2onr6"},page:{backgroundColor:"x2bj2ny",boxShadow:"x1sq3oft",display:"x1lliihq",pointerEvents:"x47corl",userSelect:"x87ps6o"},pageLoadingView:{alignItems:"x1cy8zhl",borderTop:"x10t0rhs",borderEnd:"x110b0wq",borderBottom:"x199c70p",borderStart:"x1dbk8px",boxSizing:"x9f619",display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"x13crsa5"},pageLoadingViewSlideMode:{alignItems:"x6s0dn4",borderTop:"x76ihet",borderEnd:"xwmqs3e",borderBottom:"x112ta8",borderStart:"xxxdfa6"},scrollArea:{height:"x5yr21d",overscrollBehavior:"xxqldzo"},scrollContent:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",minHeight:"x1us19tq"},textLayer:{position:"x10l6tqk"}},m=.6;function a(a){var b=a.onImageLoad,d=a.onPageRender,e=a.page;a=a.slideMode;a=a===void 0?!1:a;return e==null?h.jsx(c("MWFileViewerLoadingIndicator.react"),{}):h.jsx(n,{onImageLoad:b,onPageRender:d,page:e,slideMode:a})}a.displayName=a.name+" [from "+f.id+"]";function n(a){var b=a.onImageLoad,d=a.onPageRender,e=a.page,f=e.height,g=e.index,n=e.src,p=e.textLayer;e=e.width;a=a.slideMode;var q=k(1),r=q[0];q=q[1];q=c("useResizeObserverWithTargetRect")({onScaleChange:q,targetRect:{height:f,width:e},verticalZoomModifier:a?1:m});var s=j(null),t=i(function(){d&&d(g)},[g,d]),u=i(function(){n!=null&&p!=null&&(b==null?void 0:b(g))},[g,b,n,p]);t=c("useVisibilityObserver")({onVisible:t});return h.jsx("div",{className:c("stylex")(l.container),ref:q,children:h.jsx(c("CometScrollableArea.react"),{expanding:!0,horizontal:!1,ref:s,vertical:!0,xstyle:l.scrollArea,children:h.jsx("div",{className:c("stylex")(l.scrollContent),children:h.jsx(c("CometColumn.react"),{align:"center",expanding:!0,paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:h.jsx(c("CometColumnItem.react"),{children:h.jsx("div",{className:c("stylex")(l.layerContainer),children:n!=null&&p!=null?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:c("stylex")(l.textLayer),style:{transform:"scale("+r+")"},children:o({textLayer:p})}),h.jsx("div",{className:c("stylex")(l.imageArea),children:h.jsx(c("CometImage.react"),{height:f*r,onLoad:u,ref:t,src:n,width:e*r,xstyle:l.page})})]}):h.jsx("div",{className:c("stylex")([l.pageLoadingView,a&&l.pageLoadingViewSlideMode]),style:{height:f*r,width:e*r},children:h.jsx(c("CometProgressIndicator.react"),{})})})})})})})})}n.displayName=n.name+" [from "+f.id+"]";function o(a){a=a.textLayer;return a.map(function(a,b){b="text_"+b;return h.jsx(c("MWFilePDFViewerTextLayerElement.react"),{selectionKey:b,textLayer:a},b)})}g["default"]=a}),98);
__d("XMessengerSDKSbxFileViewerControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/iframe/fileviewer/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("MWFilePDFScrollableViewer.react",["BinarySearch","CometColumn.react","CometColumnItem.react","CometScrollableArea.react","ConstUriUtils","CookieConsentIFrameConfig","MWFilePDFViewerPageView.react","MWFileViewerLoadingIndicator.react","SecurePostMessage","XMessengerSDKSbxFileViewerControllerRouteBuilder","react","unrecoverableViolation","useDebouncedComet","useWindowSize"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useLayoutEffect,l=b.useMemo,m=b.useState,n="mw_file_pdf_viewer_frame",o=500,p=function(a){var b=a.getBoundingClientRect();a=a.getBoundingClientRect().bottom;return b.height===0||a<-o},q=function(a,b){var c=a.getBoundingClientRect();a=a.getBoundingClientRect().top;return c.height===0||a>b+o},r=function(a){return d("BinarySearch").findBoundInArray(Array.from(a),null,function(a,b){return p(a)?-1:0},d("BinarySearch").LEAST_UPPER_BOUND)},s=function(a,b,c){var d=m(null),e=d[0],f=d[1];d=m(!1);var g=d[0],h=d[1],k=l(function(){return a.getOrigin()},[a]),n=i(function(a){f(function(c){if(c==null&&!g){h(!0);b(a.length);return a}return c})},[g,b]),o=i(function(a){f(function(b){if(b==null)return b;var c=a.index,d=b[c].src!=null&&b[c].textLayer!=null;if(!d){d=b.concat();var e=d[c];d[c]=babelHelpers["extends"]({},e,a);return d}return b})},[]),p=i(function(a){if(a.origin!==k)return;a=a.data;switch(a.status){case"OnFrameReady":n(a.pages);break;case"OnPageLoaded":o(a.page);break;case"onRenderError":c(a.error);break}},[k,n,o,c]);j(function(){window.addEventListener("message",p);return function(){window.removeEventListener("message",p)}},[p]);return[e,g]},t=function(a){var b=l(function(){return a.getOrigin()},[a]),c=i(function(a){var c=window.frames[n];c&&d("SecurePostMessage").sendMessageToSpecificOrigin(c,a,b)},[b]),e=i(function(a){c({index:a,status:"OnLoadPage"})},[c]),f=i(function(){var a=document.querySelectorAll("[data-mw-file-pdf-viewer-page-view-item]"),b=r(a);while(b<a.length&&!q(a[b],window.innerHeight))a[b].querySelector("img")==null&&e(b),b++},[e]);return f};function a(a){var b=a.onPageRender,e=a.onRender,f=a.onRenderError,g=a.onScroll,i=a.previewURL,j=a.sandboxURL,m=l(function(){return d("ConstUriUtils").getUri(j)},[j]);if(m==null)throw c("unrecoverableViolation")("MWFilePDFViewer: sandboxURI cannot be created","rpp_content");a=c("useWindowSize")();e=s(m,e,f);var o=e[0],p=e[1],q=t(m);k(function(){p&&q()},[p,a,q]);var r=c("useDebouncedComet")(q);f=function(a){g(a),r()};e=l(function(){var a;return h.jsx("iframe",{className:"x1i1rx1s x1fmh03i xjm9jq1 xav7gou xaqea5y x1b1mbwd x6umtig",name:n,src:(a=c("XMessengerSDKSbxFileViewerControllerRouteBuilder").buildUri({__cci:(a=c("CookieConsentIFrameConfig").consent_param)!=null?a:"",url:i}).setDomain(m.getDomain()))==null?void 0:a.setProtocol("https"),testid:void 0})},[i,m]);a=o==null?h.jsx(c("MWFileViewerLoadingIndicator.react"),{}):h.jsx(c("CometScrollableArea.react"),{horizontal:!1,onScroll:f,children:h.jsx("div",{className:"xktia5q x1dcn8h2 x1l90r2v x1gryazu x4ii5y1 xkrivgy xr1yuqi",children:h.jsx(c("CometColumn.react"),{spacing:8,children:o.map(function(a,d){return h.jsx(c("CometColumnItem.react"),{children:h.jsx("div",{"data-mw-file-pdf-viewer-page-view-item":d,children:h.jsx(c("MWFilePDFViewerPageView.react"),{onPageRender:b,page:o[d]})})},d)})})})});return h.jsxs(h.Fragment,{children:[e,a]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSDownloadSvgIcon.bs",["MDSSvgIcon.bs","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.color;a=a.size;return h.jsx(b("MDSSvgIcon.bs").make,{size:a,color:c,children:h.jsx("path",{d:"M17.75 6.5a1 1 0 00-1 1v9.25c0 .14-.11.25-.25.25h-2a1 1 0 00-.84 1.54l3.5 5.5a1 1 0 001.68 0l3.5-5.5A1 1 0 0021.5 17h-2a.25.25 0 01-.25-.25V7.5a1 1 0 00-1-1h-.5zM7 28a1 1 0 011-1h20a1 1 0 011 1v.5a1 1 0 01-1 1H8a1 1 0 01-1-1V28z"})})}c=a;f.make=c}),null);
__d("MWDownloadButton.bs",["fbt","MDSDownloadSvgIcon.bs","TetraButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a){return i.jsx(b("MDSDownloadSvgIcon.bs").make,{color:"white",size:"24"})}function a(a){var c=a.downloadURL;a=a.onPress;return i.jsx(b("TetraButton.react"),{icon:j,label:g._("__JHASH__UsfubI1ovOQ__JHASH__"),onPress:a,linkProps:{download:!0,target:"_blank",url:c},testid:"mw-file-viewer-download-tetra-button"})}c=a;f.makeIcon=j;f.make=c}),null);
__d("MWDownloadButton.re",["MWDownloadButton.bs"],(function(a,b,c,d,e,f){a=b("MWDownloadButton.bs").make;f.make=a}),null);
__d("MWFilePDFViewerFallbackView.react",["fbt","CometColumn.react","CometRow.react","CometRowItem.react","MWDownloadButton.re","TetraText.react","react","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.downloadURL,e=a.onDownload;a=a.onRender;a=c("useVisibilityObserver")({onVisible:a});return i.jsx("div",{className:"xh8yej3 xl56j7k x5yr21d x78zum5 x6s0dn4",ref:a,children:i.jsxs(c("CometColumn.react"),{align:"center",spacing:20,children:[i.jsx(c("CometRow.react"),{children:i.jsx(c("CometRowItem.react"),{children:i.jsx(c("TetraText.react"),{align:"center",color:"primaryOnMedia",type:"body2",children:h._("__JHASH__lRepKcSjVxk__JHASH__")})})}),b!=null&&i.jsx(c("CometRow.react"),{children:i.jsx(c("CometRowItem.react"),{children:i.jsx(d("MWDownloadButton.re").make,{downloadURL:b,onPress:e})})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSShareSvgIcon.bs",["MDSSvgIcon.bs","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.color;a=a.size;return h.jsxs(b("MDSSvgIcon.bs").make,{size:a,color:c,children:[h.jsx("path",{d:"M18.766 4.857a1 1 0 00-1.532 0L13.878 8.86a1 1 0 00.766 1.643H16.5a.25.25 0 01.25.25v10.75a1 1 0 001 1h.5a1 1 0 001-1v-10.75a.25.25 0 01.25-.25h1.856a1 1 0 00.766-1.643l-3.356-4.002z"}),h.jsx("path",{d:"M14.75 13.502a1 1 0 00-1-1H12.5a4 4 0 00-4 4v8.5a4 4 0 004 4h11a4 4 0 004-4v-8.5a4 4 0 00-4-4h-1.25a1 1 0 00-1 1v.5a1 1 0 001 1h1.25a1.5 1.5 0 011.5 1.5v8.5a1.5 1.5 0 01-1.5 1.5h-11a1.5 1.5 0 01-1.5-1.5v-8.5a1.5 1.5 0 011.5-1.5h1.25a1 1 0 001-1v-.5z"})]})}c=a;f.make=c}),null);
__d("MWChatForwardCircleButton.bs",["fbt","MDSShareSvgIcon.bs","MWChatForwardAction.bs","MWChatMessageId.bs","MWChatThreadId.bs","MWLSForwardMessage.bs","TetraCircleButton.react","UseMWChatForward.re","bs_caml_option","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");c={svgFill:{fill:"xtehgxx"}};function j(a){}function a(a){var c=a.messageID,d=a.attachmentID,e=a.color,f=a.onOpenForwardDialog,h=a.onForwardAttachment,k=a.type,l=a.isSecureForwardEnabled;a=a.isCrossTransportForwardEnabled;var m=function(a){return i.jsx(b("MDSShareSvgIcon.bs").make,{color:e,size:"24"})};l=l?a?"cross_transport":"secure":a?"cross_transport":"open_";var n=b("MWLSForwardMessage.bs").useForwardAttachment(void 0);a=b("UseMWChatForward.re").useMWChatForward({onClose:j,onSend:function(a){var e=b("MWChatThreadId.bs").getFBID(a);b("bs_curry")._1(h,e);return n(a,d,b("MWChatMessageId.bs").getMessageId(c))},messageID:c,forwardDialogType:l,dropToggle:void 0});var o=a==null?void 0:b("bs_caml_option").some(a);return i.jsx(b("TetraCircleButton.react"),{icon:m,label:g._("__JHASH__GvPr2MwluxY__JHASH__"),onPress:function(a){b("bs_curry")._1(f,void 0);return b("MWChatForwardAction.bs").onOpenForwardDialog(c,o)},size:36,testid:"mw-file-viewer-forward-button",type:function(){switch(k){case"deemphasized":return"deemphasized";case"normal":return"normal";case"overlay":return"overlay";case"dark_overlay":return"dark-overlay";case"deemphasized_overlay":return"deemphasized-overlay";case"overlay_raised":return"overlay-raised";case"primary_background_overlay":return"primary-background-overlay"}}()})}d=a;f.styles=c;f.noop=j;f.make=d}),null);
__d("MWChatForwardCircleButton.re",["MWChatForwardCircleButton.bs"],(function(a,b,c,d,e,f){a=b("MWChatForwardCircleButton.bs").make;f.make=a}),null);
__d("MWDownloadCircleButton.bs",["fbt","MDSDownloadSvgIcon.bs","TetraCircleButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.downloadURL,d=a.color;a=a.onPress;var e=function(a){return i.jsx(b("MDSDownloadSvgIcon.bs").make,{color:d,size:"24"})};return i.jsx(b("TetraCircleButton.react"),{icon:e,label:g._("__JHASH__UsfubI1ovOQ__JHASH__"),onPress:a,size:36,testid:"mw-file-viewer-download-button",linkProps:{download:!0,target:"_blank",url:c}})}c=a;f.make=c}),null);
__d("MWDownloadCircleButton.re",["MWDownloadCircleButton.bs"],(function(a,b,c,d,e,f){a=b("MWDownloadCircleButton.bs").make;f.make=a}),null);
__d("MWFileViewerContainerDialogHeader.react",["fbt","ix","CometRow.react","CometRowItem.react","I64","LSMessagingThreadTypeUtil.re","MAWGating.re","MAWThreadCutover.re","MWCMThreadTypes.re","MWChatForwardCircleButton.re","MWChatMessageId.re","MWDownloadCircleButton.re","TetraCircleButton.react","fbicon","gkx","react","stylex","unrecoverableViolation","useCometTheme"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={header:{position:"xixxii4",width:"xh8yej3",zIndex:"x1vjfegm"},headerGradient:{backgroundImage:"x1uhuoo"},title:{overflowX:"x6ikm8r",overflowY:"x10wlt62",top:"x1pdr0v7"}};function a(a){var b=a.attachmentID,e=a.containingMessageID,f=a.downloadURL,g=a.hasGradient,l=a.onClose,m=a.onDownload,n=a.onForwardAttachment,o=a.onOpenForwardDialog,p=a.threadType;a=a.title;var q=c("useCometTheme")("dark"),r=q[0];q=q[1];var s=d("MWChatMessageId.re").getThreadId(e);if(!s)throw c("unrecoverableViolation")("Cannot find thread key for given message","messenger_e2ee_web");s=d("MAWThreadCutover.re").useIsCutoverOpenThread(s);var t=p!=null?c("LSMessagingThreadTypeUtil.re").isSecure(d("I64").of_int32(p)):!1;t=c("MAWGating.re").isForwardEnabled()&&t&&!c("gkx")("3118");var u=c("MAWGating.re").isCrossForwardEnabled()&&!c("gkx")("3118");p=p!=null?d("MWCMThreadTypes.re").isAnyCMThread(d("I64").of_int32(p)):!1;s=!(s||p);return j.jsx("div",{className:c("stylex")(k.header,q,g&&k.headerGradient),children:j.jsx(r,{children:j.jsxs(c("CometRow.react"),{align:"start",expanding:!0,paddingHorizontal:16,paddingVertical:12,children:[j.jsx(c("CometRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:k.title,children:a}),j.jsx(c("CometRowItem.react"),{expanding:!0,verticalAlign:"center",children:j.jsxs(c("CometRow.react"),{align:"end",paddingHorizontal:0,paddingVertical:0,spacing:8,children:[j.jsx(c("CometRowItem.react"),{verticalAlign:"center",children:f!=null&&j.jsx(d("MWDownloadCircleButton.re").make,{color:"white",downloadURL:f,onPress:m})}),s&&j.jsx(c("CometRowItem.react"),{verticalAlign:"center",children:j.jsx(d("MWChatForwardCircleButton.re").make,{attachmentID:b,color:"white",isCrossTransportForwardEnabled:u,isSecureForwardEnabled:t,messageID:e,onForwardAttachment:n,onOpenForwardDialog:o,type:"normal"})}),j.jsx(c("CometRowItem.react"),{verticalAlign:"center",children:j.jsx(c("TetraCircleButton.react"),{color:"white",icon:d("fbicon")._(i("478232"),16),label:h._("__JHASH__gaxHiFwvIGk__JHASH__"),onPress:l,size:36,testid:void 0})})]})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWFileViewerContainerPushViewHeader.react",["fbt","ix","CometGlobalPanelLayoutContext","CometRow.react","CometRowItem.react","I64","LSMessagingThreadTypeUtil.re","MAWGating.re","MWCMThreadTypes.re","MWChatMessageId.re","MWLSForwardMessage.re","TetraCircleButton.react","fbicon","gkx","react","stylex","unrecoverableViolation","useCometTheme","useCurrentRoute","useMWChatForward"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useContext,l=b.useState,m={header:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1s65kcs",position:"xixxii4",width:"xh8yej3",zIndex:"x1vjfegm"},headerControls:{end:"x1mvd8g9"},headerControlsNoSpace:{end:"xds687c"},headerGradient:{backgroundImage:"x1uhuoo"},headerWithGlobalPanel:{height:"xnnlda6"},iconHovered:{backgroundColor:"x9lwmrp"},title:{overflowX:"x6ikm8r",overflowY:"x10wlt62",start:"x1jmltjh",top:"x1pdr0v7"},titleNoSpace:{start:"x17qophe"}},n=function(){};function a(a){var b=a.attachmentID,e=a.containingMessageID,f=a.downloadURL,g=a.hasGradient,o=a.onDownload,p=a.onForwardAttachment,q=a.onOpenForwardDialog,r=a.threadType;a=a.title;var s=k(c("CometGlobalPanelLayoutContext")),t=l(function(){return!1}),u=t[0],v=t[1];t=l(function(){return!1});var w=t[0],x=t[1];t=c("useCurrentRoute")();t=(t==null?void 0:t.type)==="valid_route";var y=c("useCometTheme")("dark"),z=y[0];y=y[1];var A=d("MWChatMessageId.re").getThreadId(e);if(!A)throw c("unrecoverableViolation")("Cannot find thread key for given message","messenger_e2ee_web");A=r!=null?c("LSMessagingThreadTypeUtil.re").isSecure(d("I64").of_int32(r)):!1;r=r!=null?d("MWCMThreadTypes.re").isAnyCMThread(d("I64").of_int32(r)):!1;r=!r;A=c("MAWGating.re").isForwardEnabled()&&A&&!c("gkx")("3118");var B=c("MAWGating.re").isCrossForwardEnabled()&&!c("gkx")("3118");B=A?"secure":B?"cross_transport":"open_";var C=d("MWLSForwardMessage.re").useForwardAttachment(),D=c("useMWChatForward")({forwardDialogType:B,messageID:e,onClose:n,onSend:function(a){var c=d("MWLSForwardMessage.re").targetIdString(a);p(c);C(a,b,d("MWChatMessageId.re").getMessageId(e))}}),E=function(){D&&(q(),D.onClick())};B=A||r;return j.jsx("div",{className:c("stylex")(m.header,s&&m.headerWithGlobalPanel,y,g&&m.headerGradient),children:j.jsx(z,{children:j.jsxs(c("CometRow.react"),{align:"start",expanding:!0,paddingHorizontal:16,paddingVertical:0,children:[j.jsx(c("CometRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:[m.title,!t&&m.titleNoSpace],children:a}),j.jsx(c("CometRowItem.react"),{expanding:!0,verticalAlign:"center",children:j.jsxs(c("CometRow.react"),{align:"end",paddingHorizontal:0,paddingVertical:0,spacing:8,xstyle:[m.headerControls,!t&&m.headerControlsNoSpace],children:[j.jsx(c("CometRowItem.react"),{verticalAlign:"center",children:f!=null&&j.jsx(c("TetraCircleButton.react"),{color:"white",icon:u||w?d("fbicon")._(i("1433212"),20):d("fbicon")._(i("1441392"),20),label:h._("__JHASH__bJYcNoSRd3j__JHASH__"),linkProps:{download:!0,target:"_blank",url:f},onFocusIn:function(a){return x(function(){return!0})},onFocusOut:function(a){return x(function(){return!1})},onHoverIn:function(a){return v(function(){return!0})},onHoverOut:function(a){return v(function(){return!1})},onPress:o,overlayHoveredStyle:m.iconHovered,size:36,testid:void 0,type:"deemphasized"})}),B?j.jsx(c("CometRowItem.react"),{verticalAlign:"center",children:j.jsx(c("TetraCircleButton.react"),{color:"white",icon:d("fbicon")._(i("1433236"),20),label:h._("__JHASH__GvPr2MwluxY__JHASH__"),onPress:function(a){return E()},overlayHoveredStyle:m.iconHovered,size:36,testid:void 0,type:"deemphasized"})}):null]})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWFileViewerContainer.react",["CometColumn.react","CometColumnItem.react","MWFileViewerContainerDialogHeader.react","MWFileViewerContainerPushViewHeader.react","react","stylex","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={blackBackground:{backgroundColor:"xal61yo"},container:{backgroundColor:"x1yi8jrw",boxSizing:"x9f619"},root:{bottom:"x1ey2m1c",display:"x78zum5",end:"xds687c",position:"xixxii4",start:"x17qophe",top:"x13vifvy"},rootWithTopNav:{top:"xxzkxad"}};function a(a){var b=a.attachmentID,d=a.children,e=a.containingMessageID,f=a.downloadURL,g=a.hasHeaderGradient,j=a.onClose,k=a.onDownload,l=a.onForwardAttachment,m=a.onOpenForwardDialog,n=a.threadType;a=a.title;var o=c("useCurrentRoute")(),p=(o==null?void 0:o.routeType)==="media_viewer";o=(o==null?void 0:o.type)==="valid_route";return h.jsxs("div",{className:c("stylex")([i.root,!o&&i.rootWithTopNav]),"data-testid":void 0,children:[p?h.jsx(c("MWFileViewerContainerPushViewHeader.react"),{attachmentID:b,containingMessageID:e,downloadURL:f,hasGradient:!0,onDownload:k,onForwardAttachment:l,onOpenForwardDialog:m,threadType:n,title:a}):h.jsx(c("MWFileViewerContainerDialogHeader.react"),{attachmentID:b,containingMessageID:e,downloadURL:f,hasGradient:g,onClose:j,onDownload:k,onForwardAttachment:l,onOpenForwardDialog:m,threadType:n,title:a}),h.jsx(c("CometColumn.react"),{expanding:!0,xstyle:[i.container,p&&i.blackBackground],children:h.jsx(c("CometColumnItem.react"),{expanding:!0,children:d})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWFileViewerLogger.re",["MWFileViewerLogger.bs"],(function(a,b,c,d,e,f){c=(a=b("MWFileViewerLogger.bs")).generateSessionId;f.generateSessionId=c;d=a.logFileViewerImpression;f.logFileViewerImpression=d;e=a.logFileViewerFallback;f.logFileViewerFallback=e;b=a.logFileViewerDownloadFromHeader;f.logFileViewerDownloadFromHeader=b;c=a.logFileViewerDownloadFromFallback;f.logFileViewerDownloadFromFallback=c;d=a.logFileViewerOpenForwardDialog;f.logFileViewerOpenForwardDialog=d;e=a.logFileViewerForward;f.logFileViewerForward=e;b=a.logFileViewerClose;f.logFileViewerClose=b}),null);
__d("useMWFilePDFData",["CometRelay","MWChatMessageId.re","MessagingThreadType","getJSEnumSafe","useMWFilePDFDataQuery.graphql","useNullthrowsViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("useMWFilePDFDataQuery.graphql");function a(a){var b=d("CometRelay").usePreloadedQuery(i,a),e=b.messender_sdk_sbx_config.fbsbx_url,f=b.thread.messages.edges[0].node.timestamp_precise,g=c("useNullthrowsViolation")(b.file.downloadable_uri);f=d("MWChatMessageId.re").makeSent(a.variables.thread_id,a.variables.message_id,f);return{attachmentID:a.variables.attachment_id,containingMessageID:f,downloadURL:g,filename:b.file.filename,filesize:b.file.filesize,filetype:b.file.mimetype,pdfURL:b.file.preview_pdf_url,sandboxURL:e,threadType:c("getJSEnumSafe")(c("MessagingThreadType"),(a=b.file.message_thread)==null?void 0:a.thread_type)}}g["default"]=a}),98);
__d("MWFilePDFViewerWrapper.react",["fbt","CometColumn.react","CometColumnItem.react","FBLogger","MWFilePDFScrollableViewer.react","MWFilePDFViewerFallbackView.react","MWFileViewerContainer.react","MWFileViewerLogger.re","MWInboxInfoSharedContentQPLLogger.re","TetraText.react","performance","react","useMWFilePDFData"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useEffect,l=b.useMemo,m=b.useState,n=0,o=null;function a(a){var b=a.entryPoint,e=a.onClose,f=a.queryReference,g=a.sessionID;a=c("useMWFilePDFData")(f);var r=a.attachmentID,s=a.containingMessageID,t=a.downloadURL,u=a.filename,v=a.filesize,w=a.filetype,x=a.pdfURL,y=a.sandboxURL,z=a.threadType;a=m(!0);var A=a[0],B=a[1],C=l(function(){return{attachmentId:f.variables.attachment_id,entryPoint:b,filesize:v==null?void 0:v.toString(),filetype:w,messageId:f.variables.message_id,sessionId:g,targetId:null,threadId:f.variables.thread_id,threadType:z}},[f,b,v,w,g,z]);a=j(function(a){o=a,d("MWFileViewerLogger.re").logFileViewerImpression(babelHelpers["extends"]({},C,{filePages:a})),d("MWInboxInfoSharedContentQPLLogger.re").logOpenContentViewer()},[C]);var D=j(function(a){o=a,d("MWFileViewerLogger.re").logFileViewerFallback(babelHelpers["extends"]({},C,{filePages:a}))},[C]),E=j(function(){d("MWFileViewerLogger.re").logFileViewerDownloadFromHeader(babelHelpers["extends"]({},C,{filePages:o}))},[C]),F=j(function(){d("MWFileViewerLogger.re").logFileViewerDownloadFromFallback(babelHelpers["extends"]({},C,{filePages:o}))},[C]),G=j(function(){d("MWFileViewerLogger.re").logFileViewerOpenForwardDialog(babelHelpers["extends"]({},C,{filePages:o}))},[C]),H=j(function(a){d("MWFileViewerLogger.re").logFileViewerForward(babelHelpers["extends"]({},C,{filePages:o,targetId:a}))},[C]),I=j(function(a,b){d("MWFileViewerLogger.re").logFileViewerClose(babelHelpers["extends"]({},C,{filePages:o,maxScrollDepth:b,sessionDuration:a})),d("MWInboxInfoSharedContentQPLLogger.re").logCloseContentViewer()},[C]),J=j(function(a){n=Math.max(a+1,n)},[]);k(function(){n=0;var a=c("performance").now();return function(){var b=c("performance").now();I(b-a,n)}},[I]);u=u;u=i.jsx(c("TetraText.react"),{align:"start",color:"primaryOnMedia",type:"headlineEmphasized4",children:u!=null&&u.length>0?u:h._("__JHASH__4mD7sxbIoLP__JHASH__")});return x==null||!A?i.jsx(p,{attachmentID:r,containingMessageID:s,downloadURL:t,onClose:e,onDownloadFromFallback:F,onDownloadFromHeader:E,onForwardAttachment:H,onOpenForwardDialog:G,onRender:D,threadType:z,title:u}):i.jsx(q,{attachmentID:r,containingMessageID:s,downloadURL:t,onClose:e,onDownload:E,onForwardAttachment:H,onOpenForwardDialog:G,onPageRender:J,onRender:a,onRenderError:function(){B(!1)},pdfURL:x,sandboxURL:y,threadType:z,title:u})}a.displayName=a.name+" [from "+f.id+"]";function p(a){var b=a.attachmentID,d=a.containingMessageID,e=a.downloadURL,f=a.onClose,g=a.onDownloadFromFallback,h=a.onDownloadFromHeader,j=a.onForwardAttachment,k=a.onOpenForwardDialog,l=a.onRender,m=a.threadType;a=a.title;return i.jsx(c("MWFileViewerContainer.react"),{attachmentID:b,containingMessageID:d,downloadURL:e,hasHeaderGradient:!1,onClose:f,onDownload:h,onForwardAttachment:j,onOpenForwardDialog:k,threadType:m,title:a,children:i.jsx(c("CometColumn.react"),{expanding:!0,hasDividers:!0,children:i.jsx(c("CometColumnItem.react"),{expanding:!0,verticalAlign:"center",children:i.jsx(c("MWFilePDFViewerFallbackView.react"),{downloadURL:e,onDownload:g,onRender:l})})})})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.attachmentID,d=a.containingMessageID,e=a.downloadURL,f=a.onClose,g=a.onDownload,h=a.onForwardAttachment,j=a.onOpenForwardDialog,k=a.onPageRender,l=a.onRender,n=a.onRenderError,o=a.pdfURL,p=a.sandboxURL,q=a.threadType;a=a.title;var r=m(!1),s=r[0],t=r[1];return i.jsx(c("MWFileViewerContainer.react"),{attachmentID:b,containingMessageID:d,downloadURL:e,hasHeaderGradient:s,onClose:f,onDownload:g,onForwardAttachment:h,onOpenForwardDialog:j,threadType:q,title:a,children:i.jsx(c("CometColumn.react"),{expanding:!0,hasDividers:!0,children:i.jsx(c("CometColumnItem.react"),{expanding:!0,verticalAlign:"center",children:i.jsx(c("MWFilePDFScrollableViewer.react"),{onPageRender:k,onRender:l,onRenderError:function(a){c("FBLogger")("rpp_file_viewer","cannot_load_pdf").mustfix(a.message),n()},onScroll:function(a){a=a.target instanceof HTMLElement?a.target.scrollTop:0;t(a>0)},previewURL:o,sandboxURL:p})})})})}q.displayName=q.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerFileRoot.react",["CometErrorBoundary.react","FBLogger","MWFilePDFViewerWrapper.react","MWFileViewerLogger.re","MessengerFilePreviewGenerationEntryPoint","URI","react","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.props;a=a.queries;var e=c("useRoutePassthroughProps")(),f=typeof (e==null?void 0:e.entryPoint)==="string"?c("MessengerFilePreviewGenerationEntryPoint").cast(e==null?void 0:e.entryPoint):"direct_link",g=typeof (e==null?void 0:e.sessionID)==="string"?e==null?void 0:e.sessionID:d("MWFileViewerLogger.re").generateSessionId(),i=typeof (e==null?void 0:e.downloadUri)==="string"?e==null?void 0:e.downloadUri:null;e=function(){};var j=(b=b.onClose)!=null?b:e;return h.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},onError:function(a){c("FBLogger")("rpp_file_viewer","cannot_load_file_viewer_pushview").mustfix(a.message),i!=null&&c("URI").goURIOnNewWindow(i),j()},children:h.jsx(c("MWFilePDFViewerWrapper.react"),{entryPoint:f,onClose:j,queryReference:a.queryReference,sessionID:g})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);